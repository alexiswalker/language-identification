var woodVar,ironVar,stoneVar,goldVar,woodFromMarket=0,ironFromMarket=0,stoneFromMarket=0,woodSell,ironSell,stoneSell,randomnumber=4e3,funOpenStoneMarket=function(){void xajax_viewTradeScreen(container.open({saveName:"market",title:"Marketplace"}),{tab:2,resType:3})},funOpenIronMarket=function(){void xajax_viewTradeScreen(container.open({saveName:"market",title:"Marketplace"}),{tab:2,resType:2})},funOpenWoodMarket=function(){void xajax_viewTradeScreen(container.open({saveName:"market",title:"Marketplace"}),{tab:2,resType:1})},funOpentProfile=function(){void xajax_viewGameProfiles(container.open({saveName:"profiles",title:"Profiles"}),{tab:1})},funOpenMyOfers=function(){xajax_viewTradeScreen("market",{tab:3})},funGetWoodPrice=function(){return parseFloat($(".m-wood").text())},funGetIronPrice=function(){return parseFloat($(".m-iron").text())},funGetStonePrice=function(){return parseFloat($(".m-stone").text())},funGetGoldInAcaunt=function(){return $("#gold").text().trim().replace(/\s+/g,"")},funGetActualOfer=function(){return parseInt($("td> .clickLabel").text().trim().replace(/\s+/g,""))},marketOfer=function(){return $(".data-grid").text()},funGetGoldIntFormat=function(){return $("#gold").text().trim().indexOf("K")>1?1e3*parseInt($("#gold").text().trim().replace(/\s+/g,"").substring(0,$("#gold").text().trim().replace(/\s+/g,"").length-3)):$("#gold").text().trim().indexOf("M")>1?1e6*parseInt($("#gold").text().trim().replace(/\s+/g,"").substring(0,$("#gold").text().trim().replace(/\s+/g,"").length-3)):parseInt($("#iron").text().trim())},funGetWoodIntFormat=function(){return 1e3*parseInt($("#wood").text().trim().replace(/\s+/g,"").substring(0,$("#wood").text().trim().replace(/\s+/g,"").length-3))},funGetIronIntFormat=function(){return 1e3*parseInt($("#iron").text().trim().replace(/\s+/g,"").substring(0,$("#iron").text().trim().replace(/\s+/g,"").length-3))},funGetStoneIntFormat=function(){return 1e3*parseInt($("#stone").text().trim().replace(/\s+/g,"").substring(0,$("#stone").text().trim().replace(/\s+/g,"").length-3))},funSellResWood=function(){void xajax_viewTradeScreen("market",{tab:1,resType:1})},funSellResIron=function(){void xajax_viewTradeScreen("market",{tab:1,resType:2})},funSellResStone=function(){void xajax_viewTradeScreen("market",{tab:1,resType:3})},funSellButton=function(){xajax_doSellResource("market",xajax.getFormValues("sellForm"))};void xajax_viewTradeScreen(container.open({saveName:"market",title:"%D0%9F%D0%B0%D0%B7%D0%B0%D1%80"}),{tab:2,resType:2});var aceptableWoodPrice=prompt("Look for woodOnPrice:"),aceptableIronPrice=prompt("Look for ironOnPrice:"),aceptableStonePrice=prompt("Look for stoneOnPrice:"),qPertransaction=0,sellWoodPrice=0,sellIronPrice=0,sellStonePrice=0,woodStorageLimit=0,ironStoraeLimit=0,stoneStorageLimit=0,woodVarInStorage=function(){parseInt($("#wood").text().trim().replace(/\s+/g,""))},ironVarInStorage=function(){parseInt($("#iron").text().trim().replace(/\s+/g,""))},stoneVaInStorager=function(){parseInt($("#stone").text().trim().replace(/\s+/g,""))};goldVar=parseInt($("#gold").text().trim().replace(/\s+/g,""));var counter=0,debugtimer=Date.now(),deals=0;woodVar=parseInt($("#wood").text().trim().replace(/\s+/g,"")),ironVar=parseInt($("#iron").text().trim().replace(/\s+/g,"")),stoneVar=parseInt($("#stone").text().trim().replace(/\s+/g,"")),goldVar=parseInt($("#gold").text().trim().replace(/\s+/g,""));var counter=0,debugtimer=Date.now(),deals=0,doDeals=function(e){woodSell=funGetWoodPrice(),ironSell=funGetIronPrice(),stoneSell=funGetStonePrice(),goldVar=funGetGoldInAcaunt(),console.log("Imperial-Manger is runing price check: delta from Last "+(Date.now()-debugtimer)),marketOfer().length>100?console.log("Have offers  on market"):(console.log("No offers on market"),marketOfer().length<100&&(console.log("In"),sellWoodPrice>0&&funGetWoodIntFormat()>woodStorageLimit&&(xajax_viewTradeScreen("market",{tab:1}),setTimeout(function(){funSellResWood(),setTimeout(function(){$("#am1").val(qPertransaction),$("#pr1").val(sellWoodPrice).keyup(),funSellButton()},1e3)},1e3),funOpenMyOfers()),sellIronPrice>0&&funGetIronIntFormat()>ironStoraeLimit&&(xajax_viewTradeScreen("market",{tab:1}),setTimeout(function(){funSellResIron(),setTimeout(function(){$("#am1").val(qPertransaction),$("#pr1").val(sellWoodPrice).keyup(),funSellButton()},500)},500),funOpenMyOfers()),sellStonePrice>0&&funGetStoneIntFormat()>stoneStorageLimit&&(xajax_viewTradeScreen("market",{tab:1}),setTimeout(function(){funSellResStone(),setTimeout(function(){$("#am1").val(qPertransaction),$("#pr1").val(sellWoodPrice).keyup(),funSellButton()},500)},500),funOpenMyOfers()))),console.log("Deasl so far :"+deals),console.log("Checks so far :"+counter),console.log("Wood price on market: "+woodSell+" desired price: "+aceptableWoodPrice+" Wood from market "+woodFromMarket),console.log("Iron price on market: "+ironSell+" desired price: "+aceptableIronPrice+" Iron from market "+ironFromMarket),console.log("Stone price on market: "+stoneSell+" desired price: "+aceptableStonePrice+" Stone from market "+stoneFromMarket),console.log("Avalible gold: "+goldVar),aceptableWoodPrice>=woodSell?(funOpenWoodMarket(),setTimeout(function(){funGetWoodPrice()<=aceptableWoodPrice?e>funGetActualOfer()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),deals++,woodFromMarket+=parseInt(funGetActualOfer())):(funGetActualOfer()*funGetWoodPrice()<funGetGoldIntFormat()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),deals++,woodFromMarket+=parseInt(funGetActualOfer())):($("#amountToBuyId").val(funGetGoldIntFormat()/funGetWoodPrice()-1e3).keyup().submit(),deals++,woodFromMarket+=parseInt(funGetGoldIntFormat()/funGetWoodPrice()-1e3)),$("#amountToBuyId").val(e).keyup().submit(),deals++,woodFromMarket+=parseInt(e)):counter++},300)):aceptableIronPrice>=ironSell?(funOpenIronMarket(),setTimeout(function(){funGetIronPrice()<=aceptableIronPrice?e>funGetActualOfer()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),deals++,ironFromMarket+=parseInt(funGetActualOfer())):(funGetActualOfer()*funGetIronPrice()<funGetGoldIntFormat()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),deals++,ironFromMarket+=parseInt(funGetActualOfer())):($("#amountToBuyId").val(funGetGoldIntFormat()/funGetIronPrice()-1e3).keyup().submit(),deals++,ironFromMarket+=parseInt(funGetGoldIntFormat()/funGetIronPrice()-1e3)),$("#amountToBuyId").val(e).keyup().submit(),deals++):counter++},300)):aceptableStonePrice>=stoneSell?(funOpenStoneMarket(),setTimeout(function(){funGetStonePrice()<=aceptableStonePrice?e>funGetActualOfer()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),stoneFromMarket+=parseInt(funGetActualOfer()),deals++):(funGetActualOfer()*funGetStonePrice()<funGetGoldIntFormat()?($("#amountToBuyId").val(funGetActualOfer()).keyup().submit(),stoneFromMarket+=parseInt(funGetActualOfer()),deals++):($("#amountToBuyId").val(funGetGoldIntFormat()/funGetStonePrice()-1e3).keyup().submit(),stoneFromMarket+=parseInt(funGetGoldIntFormat()/funGetStonePrice()-1e3),deals++),$("#amountToBuyId").val(e).keyup().submit(),deals++,stoneFromMarket+=parseInt(e)):counter++},300)):(counter++,funOpenMyOfers()),debugtimer=Date.now()};!function e(){var t=Math.round(2e3*Math.random())+1200;setTimeout(function(){doDeals(qPertransaction),e()},t)}();